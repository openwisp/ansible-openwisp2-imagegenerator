# variables holding extra parameters
recompile: false
cores: 1
org_filter: "{% if orgs is defined %}{{ orgs.split(',') }}{% endif %}"
# ssl library
openwisp2fw_ssl_lib: openssl
# apt packages needed for compilation
openwisp2fw_apt_make_dependencies:
    - build-essential
    - git
    - libncurses5-dev
    - zlib1g-dev
    - unzip
    - libssl-dev
    - subversion
    - wget
    - gawk
    - ccache
    - xsltproc
    # needed for mkpasswd
    - whois
# base OpenWRT repository
openwisp2fw_source_repo: https://github.com/openwrt/openwrt.git
# base OpenWRT version
# accepted values: "HEAD", a branch name, a tag name or a SHA-1 commit hash
openwisp2fw_source_version: openwrt-19.07
# contents of feeds.conf
openwisp2fw_source_feeds:
    - method: src-git
      name: openwisp
      location: https://github.com/openwisp/openwisp-config.git
      branch: master
    - method: src-git
      name: packages
      location: https://github.com/openwrt/packages.git
      branch: openwrt-19.07
    - method: src-git
      name: luci
      location: https://github.com/openwrt/luci.git
      branch: openwrt-19.07
    - method: src-git
      name: targets
      location: https://github.com/openwrt/targets.git
      branch: master
# the following packages will be compiled and added
# to all the firmware images by default
openwisp2fw_source_default_packages:
    - openwisp-config-{{ openwisp2fw_ssl_lib }}
    - luci-openwisp-{{ openwisp2fw_ssl_lib }}
    - openvpn-{{ openwisp2fw_ssl_lib }}
# the following packages are compiled for convenience
# so they can be added by using playbook variables if needed
openwisp2fw_source_additional_packages:
    - wpad
    - iwinfo
    - iputils-ping
    - ip-full
    - wget
    - kmod-3c59x
    - kmod-e100
    - kmod-e1000
    - kmod-natsemi
    - kmod-ne2k-pci
    - kmod-pcnet32
    - kmod-8139too
    - kmod-r8169
    - kmod-sis900
    - kmod-tg3
    - kmod-via-rhine
    - kmod-via-velocity
    - kmod-button-hotplug
    - partx-utils
# other arbitrary configurations added in the OpenWRT .config file
openwisp2fw_source_other_configs:
    - CONFIG_BUSYBOX_CUSTOM=y
    - CONFIG_BUSYBOX_CONFIG_FEATURE_EDITING_SAVEHISTORY=y
    - CONFIG_BUSYBOX_CONFIG_FEATURE_EDITING_SAVE_ON_EXIT=y
    - CONFIG_BUSYBOX_CONFIG_FEATURE_REVERSE_SEARCH=y
    - CONFIG_BUSYBOX_CONFIG_FEATURE_VI_UNDO=y
    # workaround to avoid conflicts between wpad and wpad-basic
    - "# CONFIG_PACKAGE_wpad-basic is not set"
openwisp2fw_source_targets:
    - system: ar71xx
      subtarget: generic
      profile: Default
    - system: x86
      subtarget: generic
      profile: Generic
# image flavours (see README to know what a flavour is)
openwisp2fw_image_flavours:
    standard:
      ar71xx:
        packages: "{{ openwisp2fw_default_packages }}"
      x86:
        packages: "{{ openwisp2fw_default_packages }}"
# convenience variable used in openwisp2fw_image_flavours
openwisp2fw_default_packages:
    # these packages will be removed
    - -iptables
    - -ip6tables
    - -ppp
    - -ppp-mod-pppoe
    - -firewall
    - -odhcpd
    - -odhcp6c
    - -wpad-basic
    # these packages will be added
    - wpad
    - iwinfo
    - uhttpd
    - uhttpd-mod-ubus
    - px5g
    - libustream-{{ openwisp2fw_ssl_lib }}
    - openvpn-{{ openwisp2fw_ssl_lib }}
    - openwisp-config-{{ openwisp2fw_ssl_lib }}
# default unmanaged list for openwisp-config
openwisp2fw_default_unmanaged:
    - system.@led
    - network.loopback
    - network.@switch
    - network.@switch_vlan
openwisp2fw_uploader:
    # whether to upload the results to OpenWISP Firmware Upgrader
    enabled: false
    # OpenWISP server URL
    url: ''
    # API token of an user who is authorized to upload images
    token: ''
    # maps categories of fw-upgrader to builds generated by this tool
    category_map:
        - organization_name: ''  # as in `openwisp2fw_organizations.name`
        - category_id: ''  # the UUID of the firmware category of openwisp fw-upgrader
        - flavour: ''  # as in `openwisp2fw_organizations. flavours`
    # image types to upload
    # eg:
    # x86-64-combined-squashfs.img.gz
    # x86-generic-combined-squashfs.img.gz
    # x86-geode-combined-squashfs.img.gz
    # ar71xx-generic-xd3200-squashfs-sysupgrade.bin
    # ath79-generic-ubnt_unifiac-mesh-squashfs-sysupgrade.bin
    image_types: []
